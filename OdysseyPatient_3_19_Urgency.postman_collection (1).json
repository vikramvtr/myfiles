{
	"info": {
		"_postman_id": "1e613c6c-118a-460f-8fc0-eb4e324a0ba6",
		"name": "OdysseyPatient_3_19_Urgency",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "9127246"
	},
	"item": [
		{
			"name": "GetSearchProtocol",
			"item": [
				{
					"name": "getsignsearchprotocol",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")\r",
									"\r",
									"// load questions and answers in environment variable\r",
									"var v1 = data.ref.toString();\r",
									"var v2 = data.testRef.toString();\r",
									"var v3 = data.complaint.toString();\r",
									"var v4 = data.urgencyExpected.toString();\r",
									"var v5 = data.bannerText.toString();\r",
									"var v6 = data.considerText.toString();\r",
									"var v7 = data.ref1.toString();\r",
									"var v8 = data.testRef1.toString();\r",
									"console.log(\"**********Executing scenario number :::::  \"+v1+\"  ****************\")\r",
									"var arr = [v1, v2, v3, v4, v5, v6, v7, v8];\r",
									"pm.environment.set(\"anslist\", JSON.stringify(arr));\r",
									"\r",
									"console.log(\"Data loaded\")\r",
									"var agein = data.ageIn.toString();\r",
									"var agein = data.ageIn;\r",
									"var agemin = Number(data.ageMin);\r",
									"var agemax = Number(data.ageMax);\r",
									"var randomNumber = _.random(agemin, agemax);\r",
									"var age;\r",
									"if(agein === \"Years\") {\r",
									"    var age = Math.floor(randomNumber*52.14);\r",
									"}\r",
									"else if(agein === \"Weeks\") {\r",
									"    age = randomNumber + 1;\r",
									"}\r",
									"else if(agein === \"Months\") {\r",
									"    age = Math.floor(randomNumber*4.34);\r",
									"}\r",
									"\r",
									"var gender = data.gender.toString();\r",
									"if(gender === \"Male\") {\r",
									"    gender = \"M\";\r",
									"}\r",
									"else if(gender === \"Female\") {\r",
									"    gender = \"F\";\r",
									"}\r",
									"else {\r",
									"   var randomNumber1 = _.random(0, 3);\r",
									"   if(randomNumber1 === 1) {\r",
									"       gender = \"M\"\r",
									"   }\r",
									"   else {\r",
									"       gender = \"F\";\r",
									"   }\r",
									"}\r",
									"var demographic = gender.concat(age.toString());\r",
									"var demographic = gender.concat(age);\r",
									"console.log(\"Demographics for assessment is :: \"+demographic)\r",
									"var uuid = require('uuid');\r",
									"var myUUID = uuid.v4();\r",
									"postman.setEnvironmentVariable(\"previd\", myUUID);\r",
									"postman.setEnvironmentVariable(\"demographics\",demographic)\r",
									"postman.setEnvironmentVariable(\"searchcomplaint\",v3)\r",
									"var demographics=pm.environment.get(\"demographics\")\r",
									"var clientname = pm.environment.get(\"clientname\")\r",
									"\r",
									"var res = \"non-seq-assess/v2/searchpresentingcomplaint?client=\"+clientname+\"&searchCriteria=\"+v3+\"&searchType=StartsWith&demographics=\"+demographics+\"&clinical=\"+pm.environment.get(\"clinical\")+\"&format=json&token=\"+myUUID;\r",
									"\r",
									"console.log(\"encoded :: \"+res);\r",
									"var encoded = encodeURIComponent(res);\r",
									"\r",
									"postman.setEnvironmentVariable(\"encoded\", encoded);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Placing signature in environment variable\r",
									"var str = responseBody.replace(\"\\\"\",\"\");\r",
									"var str1 = str.replace(\"\\\"\",\"\");\r",
									"pm.environment.set(\"signature\", str1);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base}}seq-assess/v2/sign?url=/{{encoded}}&format=json&token={{$guid}}&client={{clientname}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"sign"
							],
							"query": [
								{
									"key": "url",
									"value": "/{{encoded}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{$guid}}"
								},
								{
									"key": "age",
									"value": "23",
									"disabled": true
								},
								{
									"key": "gender",
									"value": "f",
									"disabled": true
								},
								{
									"key": "client",
									"value": "{{clientname}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getsearchprotocol",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var presentingComplaint = data.complaint.toString();\r",
									"var match = false;\r",
									"jsonData = JSON.parse(responseBody)\r",
									"\r",
									"for(var i=0; i<jsonData.Complaints.length; i++) {\r",
									"    var currentProtocol = jsonData.Complaints[i].Description;\r",
									"    console.log(\"Current protocol :: \"+currentProtocol);\r",
									"    if(currentProtocol.toUpperCase() === presentingComplaint.toUpperCase()) {\r",
									"        var protocolsCodes = jsonData.Complaints[i].Protocols;\r",
									"        pm.environment.set(\"protocols\", protocolsCodes);\r",
									"        console.log(\"protocolCodes matched :: \"+jsonData.Complaints[i].Protocols)\r",
									"        pm.test(\"Validation: \"+presentingComplaint+\" :: Presenting complaint Found in search result and selected\", function () {\r",
									"            pm.expect(true).is.to.equal(true);\r",
									"        });\r",
									"        break;\r",
									"    }\r",
									"}\r",
									"\r",
									"let mockResponse = JSON.stringify(jsonData);\r",
									"pm.test(\"Response JSON body returned: \"+mockResponse, function () {\r",
									"    pm.expect(true).is.to.equal(true);\r",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}non-seq-assess/v2/searchpresentingcomplaint?client={{clientname}}&searchCriteria={{searchcomplaint}}&searchType=StartsWith&demographics={{demographics}}&clinical={{clinical}}&format=json&token={{previd}}&signature={{signature}}",
							"host": [
								"{{base}}non-seq-assess"
							],
							"path": [
								"v2",
								"searchpresentingcomplaint"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "searchCriteria",
									"value": "{{searchcomplaint}}"
								},
								{
									"key": "searchType",
									"value": "StartsWith"
								},
								{
									"key": "demographics",
									"value": "{{demographics}}"
								},
								{
									"key": "clinical",
									"value": "{{clinical}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{previd}}"
								},
								{
									"key": "signature",
									"value": "{{signature}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "GetNew",
			"item": [
				{
					"name": "getsignnew",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")\r",
									"\r",
									"// creating encoded url\r",
									"var uuid = require('uuid');\r",
									"var myUUID = uuid.v4();\r",
									"postman.setEnvironmentVariable(\"previd\", myUUID);\r",
									"\r",
									"var assessment_Type = pm.environment.get(\"assessmenttype\");\r",
									"var assessmentType_URL;\r",
									"if(assessment_Type.toUpperCase() === \"FIRST\") {\r",
									"    assessmentType_URL = \"new\";\r",
									"}\r",
									"else {\r",
									"    assessmentType_URL = \"newthirdperson\";\r",
									"}\r",
									"pm.environment.set(\"assessmentTypeURL\", assessmentType_URL);\r",
									"var clientname = pm.environment.get(\"clientname\")\r",
									"\r",
									"var res = \"seq-assess/v2/\"+assessmentType_URL+\"?client=\"+clientname+\"&demographics=\"+pm.environment.get(\"demographics\")+\"&codes=\"+pm.environment.get(\"protocols\")+\"&thirdParty=~~Chrome 83.0.4103.97~Windows NT 10.0~&rot=false&clinical=\"+pm.environment.get(\"clinical\")+\"&format=json&token=\"+myUUID;\r",
									"var encoded = encodeURIComponent(res);\r",
									"postman.setEnvironmentVariable(\"encoded\", encoded);\r",
									"\r",
									"//placing expected urgency code in environment variable\r",
									"var urgency = data.urgencyExpected.toString().toUpperCase();\r",
									"pm.environment.set(\"urgencycode\", urgency);\r",
									"\r",
									"// load questions and answers in environment variable\r",
									"var v1 = data.question1.toString();\r",
									"var v2 = data.answerList1.toString();\r",
									"var v3 = data.question2.toString();\r",
									"var v4 = data.answerList2.toString();\r",
									"var v5 = data.question3.toString();\r",
									"var v6 = data.answerList3.toString();\r",
									"var v7 = data.question4.toString();\r",
									"var v8 = data.answerList4.toString();\r",
									"var v9 = data.question5.toString();\r",
									"var v10 = data.answerList5.toString();\r",
									"\r",
									"var arr = [v1, v2, v3, v4, v5, v6, v7, v8, v9, v10];\r",
									"\r",
									"pm.environment.set(\"qnalist\", JSON.stringify(arr));\r",
									"console.log(\"QNA fetched :: \"+JSON.stringify(arr))\r",
									"\r",
									"var counter = 0;\r",
									"for(var i=0;i<arr.length;i++) {\r",
									"    if(arr[i] === \"\") {\r",
									"        break;\r",
									"    }\r",
									"    else {\r",
									"        counter = counter + 1;\r",
									"    }\r",
									"    i++;\r",
									"}\r",
									"console.log(\"Number of questions to be answered :: \"+counter)\r",
									"pm.environment.set(\"numofquestoanswer\", counter);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Placing signature in environment variable\r",
									"var str = responseBody.replace(\"\\\"\",\"\");\r",
									"var str1 = str.replace(\"\\\"\",\"\");\r",
									"pm.environment.set(\"signature\", str1);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/sign?client={{clientname}}&url=/{{encoded}}&format=json&token={{$guid}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"sign"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "url",
									"value": "/{{encoded}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{$guid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getnew",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"let responseData=pm.response.json();\r",
									"pm.environment.set(\"SessionID\", responseData.SessionId);\r",
									"jsonData = JSON.parse(responseBody)\r",
									"\r",
									"ar = JSON.parse(pm.environment.get(\"qnalist\"));\r",
									"\r",
									"// fetching answerid for the next question and place it in environment variable\r",
									"var status = 0;\r",
									"for(var j=0; j<ar.length; j++) {\r",
									"    if(ar[j] === \"\") {\r",
									"        break;\r",
									"    }\r",
									"    else {\r",
									"        var curr_ques = ar[j].toString().replace(/\\\",\\\"/g, \",\").toUpperCase();\r",
									"        if(jsonData.Current.Text.toUpperCase() === curr_ques) {\r",
									"            var exp_ans = ar[j+1].toString().toUpperCase();\r",
									"            for(var i=0; i<jsonData.Current.Answers.length; i++) {\r",
									"                if(jsonData.Current.Answers[i].Text.toUpperCase() === exp_ans) {\r",
									"                    status = 1;\r",
									"                    console.log(exp_ans);\r",
									"                    pm.environment.set(\"Ansid\",jsonData.Current.Answers[i].Id);\r",
									"                    pm.test(\"Validation: \"+jsonData.Current.Answers[i].Text+\" :: is selected for question :: \"+jsonData.Current.Text, function () {\r",
									"                        pm.expect(true).is.to.equal(true);\r",
									"                    });\r",
									"\r",
									"                    var counter = Number(pm.environment.get(\"numofquestoanswer\"));\r",
									"                    counter = counter - 1;\r",
									"                    pm.environment.set(\"numofquestoanswer\", counter);\r",
									"                    break;                \r",
									"                }                \r",
									"            }\r",
									"        }\r",
									"        if(status === 1) {\r",
									"            break;\r",
									"        }\r",
									"    }\r",
									"    j++;\r",
									"}\r",
									"\r",
									"if(status === 0) {\r",
									"    pm.environment.set(\"Ansid\",jsonData.Current.Answers[0].Id);\r",
									"}\r",
									"\r",
									"let mockResponse = JSON.stringify(jsonData);\r",
									"pm.test(\"Response JSON body returned: \"+mockResponse, function () {\r",
									"    pm.expect(true).is.to.equal(true);\r",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/{{assessmentTypeURL}}?client={{clientname}}&demographics={{demographics}}&codes={{protocols}}&thirdParty=~~Chrome 83.0.4103.97~Windows NT 10.0~&rot=false&clinical={{clinical}}&format=json&token={{previd}}&signature={{signature}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"{{assessmentTypeURL}}"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "demographics",
									"value": "{{demographics}}"
								},
								{
									"key": "codes",
									"value": "{{protocols}}"
								},
								{
									"key": "thirdParty",
									"value": "~~Chrome 83.0.4103.97~Windows NT 10.0~"
								},
								{
									"key": "rot",
									"value": "false"
								},
								{
									"key": "clinical",
									"value": "{{clinical}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{previd}}"
								},
								{
									"key": "signature",
									"value": "{{signature}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "GetAnswer",
			"item": [
				{
					"name": "getsignanswer",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")\r",
									"\r",
									"// creating encoded url\r",
									"var id = pm.environment.get(\"SessionID\");\r",
									"var uuid = require('uuid');\r",
									"var myUUID = uuid.v4();\r",
									"postman.setEnvironmentVariable(\"previd\", myUUID);\r",
									"var Ansid=pm.environment.get(\"Ansid\");\r",
									"var clientname = pm.environment.get(\"clientname\")\r",
									"var res = \"seq-assess/v2/answer?client=\"+clientname+\"&answerid=\"+Ansid+\"&rot=false&clinical=\"+pm.environment.get(\"clinical\")+\"&format=json&token=\"+myUUID+\"&sessionid=\"+id;\r",
									"var encoded = encodeURIComponent(res);\r",
									"postman.setEnvironmentVariable(\"encoded\", encoded);\r",
									"\r",
									"postman.setNextRequest(\"postanswer\");"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Placing signature in environment variable\r",
									"var str = responseBody.replace(\"\\\"\",\"\");\r",
									"var str1 = str.replace(\"\\\"\",\"\");\r",
									"pm.environment.set(\"signature\", str1);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/sign?client={{clientname}}&url=/{{encoded}}&format=json&token={{$guid}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"sign"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "url",
									"value": "/{{encoded}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{$guid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "postanswer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"let responseData=pm.response.json();\r",
									"pm.environment.set(\"SessionID\", responseData.SessionId);\r",
									"jsonData = JSON.parse(responseBody)\r",
									"\r",
									"var total_ques = 0;\r",
									"for(var k=0; k<jsonData.QuestionSets.length; k++) {\r",
									"    total_ques = total_ques + Number(jsonData.QuestionSets[k].Total);\r",
									"}\r",
									"\r",
									"ar = JSON.parse(pm.environment.get(\"qnalist\"));\r",
									"// fetching answerid for the next question and place it in environment variable\r",
									"var status = 0;\r",
									"for(var j=0; j<ar.length; j++) {\r",
									"    if(ar[j] === \"\") {\r",
									"        break;\r",
									"    }\r",
									"    else {\r",
									"        var curr_ques = ar[j].toString().replace(/\\\",\\\"/g, \",\").toUpperCase().trim();\r",
									"        // console.log(\"Debug:Question Text :: \"+curr_ques)\r",
									"        if(jsonData.Current.Text.toUpperCase() === curr_ques) {\r",
									"            console.log(curr_ques+\" :: QUESTION is found\");\r",
									"            var exp_ans = ar[j+1].toString().toUpperCase().trim();\r",
									"            for(var i=0; i<jsonData.Current.Answers.length; i++) {\r",
									"                console.log(\"Debug: Answer Text ::\"+jsonData.Current.Answers[i].Text)\r",
									"                if(jsonData.Current.Answers[i].Text.toUpperCase() === exp_ans) {\r",
									"                    status = 1;\r",
									"                    console.log(exp_ans+\" is found for question :: \"+curr_ques);\r",
									"                    pm.environment.set(\"Ansid\",jsonData.Current.Answers[i].Id);\r",
									"                    pm.test(\"Validation: \"+jsonData.Current.Answers[i].Text+\" :: is selected for question :: \"+jsonData.Current.Text, function () {\r",
									"                        pm.expect(true).is.to.equal(true);\r",
									"                    });\r",
									"\r",
									"                    if(total_ques === Number(jsonData.NumberAnswersProvided)) {\r",
									"                        console.log(\"Last question answered\");\r",
									"                    }\r",
									"                    else {\r",
									"                        var counter = Number(pm.environment.get(\"numofquestoanswer\"));\r",
									"                        counter = counter - 1;\r",
									"                        pm.environment.set(\"numofquestoanswer\", counter);\r",
									"                    }\r",
									"                    break;\r",
									"                }                \r",
									"            }\r",
									"        }\r",
									"        if(status === 1) {\r",
									"            break;\r",
									"        }\r",
									"    }\r",
									"    j++;\r",
									"}\r",
									"\r",
									"if(status === 0) {\r",
									"    pm.environment.set(\"Ansid\",jsonData.Current.Answers[0].Id);\r",
									"//    console.log(\"Debug:Current Question to be answered :: \"+jsonData.Current.Text)\r",
									"//    console.log(\"setting negative answerid\")\r",
									"}\r",
									"\r",
									"// calling next request based on type of next question as single or multy choice\r",
									"var reqtofollow;\r",
									"if(jsonData.Current.AllowsMultipleAnswers === false) {\r",
									"  reqtofollow = \"getsignanswer\";\r",
									"}\r",
									"else {\r",
									"  reqtofollow = \"getsignanswers\";\r",
									"}\r",
									"\r",
									"// coming out of Q&A Loop\r",
									"if(total_ques === Number(jsonData.NumberAnswersProvided)) {\r",
									"    reqtofollow = \"getsignQ&A\";\r",
									"    pm.environment.set(\"totalnumberofques\", total_ques);\r",
									"    var expUrgencyCode = pm.environment.get(\"urgencycode\");\r",
									"    var actUrgencyCode = jsonData.Urgency;\r",
									"    pm.test(\"=====*****=====Validation of assessment urgency=====*****=====ExpectedUrgency :: \"+expUrgencyCode+\" & ActualUrgency :: \"+actUrgencyCode, function () {\r",
									"            pm.expect(expUrgencyCode).is.to.equal(actUrgencyCode);\r",
									"    });\r",
									"}\r",
									"\r",
									"let mockResponse = JSON.stringify(jsonData);\r",
									"pm.test(\"Response JSON body returned: \"+mockResponse, function () {\r",
									"    pm.expect(true).is.to.equal(true);\r",
									"});\r",
									"\r",
									"postman.setNextRequest(reqtofollow);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base}}seq-assess/v2/answer?client={{clientname}}&answerid={{Ansid}}&rot=false&clinical={{clinical}}&format=json&token={{previd}}&sessionid={{SessionID}}&signature={{signature}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"answer"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "answerid",
									"value": "{{Ansid}}"
								},
								{
									"key": "rot",
									"value": "false"
								},
								{
									"key": "clinical",
									"value": "{{clinical}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{previd}}"
								},
								{
									"key": "sessionid",
									"value": "{{SessionID}}"
								},
								{
									"key": "signature",
									"value": "{{signature}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getsignanswers",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")\r",
									"\r",
									"// creating encoded url\r",
									"var id = pm.environment.get(\"SessionID\");\r",
									"var uuid = require('uuid');\r",
									"var myUUID = uuid.v4();\r",
									"postman.setEnvironmentVariable(\"previd\", myUUID);\r",
									"var Ansid=pm.environment.get(\"Ansid\");\r",
									"var clientname = pm.environment.get(\"clientname\")\r",
									"var res = \"seq-assess/v2/answers?client=\"+clientname+\"&answers=\"+Ansid+\"&rot=false&clinical=\"+pm.environment.get(\"clinical\")+\"&format=json&token=\"+myUUID+\"&sessionid=\"+id;\r",
									"var encoded = encodeURIComponent(res);\r",
									"postman.setEnvironmentVariable(\"encoded\", encoded);\r",
									"\r",
									"postman.setNextRequest(\"postanswers\");\r",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Placing signature in environment variable\r",
									"var str = responseBody.replace(\"\\\"\",\"\");\r",
									"var str1 = str.replace(\"\\\"\",\"\");\r",
									"pm.environment.set(\"signature\", str1);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/sign?client={{clientname}}&url=/{{encoded}}&format=json&token={{$guid}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"sign"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "url",
									"value": "/{{encoded}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{$guid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "postanswers",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"let responseData=pm.response.json();\r",
									"pm.environment.set(\"SessionID\", responseData.SessionId);\r",
									"jsonData = JSON.parse(responseBody)\r",
									"\r",
									"var total_ques = 0;\r",
									"for(var k=0; k<jsonData.QuestionSets.length; k++) {\r",
									"    total_ques = total_ques + Number(jsonData.QuestionSets[k].Total);\r",
									"}\r",
									"\r",
									"ar = JSON.parse(pm.environment.get(\"qnalist\"));\r",
									"\r",
									"// fetching answerid for the next question and place it in environment variable\r",
									"var status = 0;\r",
									"for(var j=0; j<ar.length; j++) {\r",
									"    if(ar[j] === \"\") {\r",
									"        break;\r",
									"    }\r",
									"    else {\r",
									"        var curr_ques = ar[j].toString().replace(/\\\",\\\"/g, \",\").toUpperCase().trim();\r",
									"        // console.log(\"Debug:Question Text :: \"+curr_ques)\r",
									"        if(jsonData.Current.Text.toUpperCase() === curr_ques) {\r",
									"            console.log(curr_ques+\" :: QUESTION is found\");\r",
									"            var exp_ans = ar[j+1].toString().toUpperCase().trim();\r",
									"            for(var i=0; i<jsonData.Current.Answers.length; i++) {\r",
									"                console.log(\"Debug: Answer Text ::\"+jsonData.Current.Answers[i].Text)\r",
									"                if(jsonData.Current.Answers[i].Text.toUpperCase() === exp_ans) {\r",
									"                    status = 1;\r",
									"                    console.log(exp_ans+\" is found for question :: \"+curr_ques);\r",
									"                    pm.environment.set(\"Ansid\",jsonData.Current.Answers[i].Id);\r",
									"                    pm.test(\"Validation: \"+jsonData.Current.Answers[i].Text+\" :: is selected for question :: \"+jsonData.Current.Text, function () {\r",
									"                        pm.expect(true).is.to.equal(true);\r",
									"                    });\r",
									"\r",
									"                    if(total_ques === Number(jsonData.NumberAnswersProvided)) {\r",
									"                        console.log(\"Last question answered\");\r",
									"                    }\r",
									"                    else {\r",
									"                        var counter = Number(pm.environment.get(\"numofquestoanswer\"));\r",
									"                        counter = counter - 1;\r",
									"                        pm.environment.set(\"numofquestoanswer\", counter);\r",
									"                    }\r",
									"                    break;\r",
									"                }                \r",
									"            }\r",
									"        }\r",
									"        if(status === 1) {\r",
									"            break;\r",
									"        }\r",
									"    }\r",
									"    j++;\r",
									"}\r",
									"\r",
									"if(status === 0) {\r",
									"//    console.log(\"Debug:Current Multy Question to be answered :: \"+jsonData.Current.Text)\r",
									"    pm.environment.set(\"Ansid\",jsonData.Current.Answers[0].Id);\r",
									"//    console.log(\"Debug:setting negative answerid for multyselect\")\r",
									"}\r",
									"\r",
									"// calling next request based on type of next question as single or multy choice\r",
									"var reqtofollow;\r",
									"if(jsonData.Current.AllowsMultipleAnswers === false) {\r",
									"  reqtofollow = \"getsignanswer\";\r",
									"}\r",
									"else {\r",
									"  reqtofollow = \"getsignanswers\";\r",
									"}\r",
									"\r",
									"// coming out of Q&A Loop\r",
									"if(total_ques === Number(jsonData.NumberAnswersProvided)) {\r",
									"    reqtofollow = \"getsignQ&A\";\r",
									"    pm.environment.set(\"totalnumberofques\", total_ques);\r",
									"    var expUrgencyCode = pm.environment.get(\"urgencycode\");\r",
									"    var actUrgencyCode = jsonData.Urgency;\r",
									"    pm.test(\"=====*****=====Validation of assessment urgency=====*****=====ExpectedUrgency :: \"+expUrgencyCode+\" & ActualUrgency :: \"+actUrgencyCode, function () {\r",
									"            pm.expect(expUrgencyCode).is.to.equal(actUrgencyCode);\r",
									"    });\r",
									"}\r",
									"\r",
									"let mockResponse = JSON.stringify(jsonData);\r",
									"pm.test(\"Response JSON body returned: \"+mockResponse, function () {\r",
									"    pm.expect(true).is.to.equal(true);\r",
									"});\r",
									"\r",
									"postman.setNextRequest(reqtofollow);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base}}seq-assess/v2/answers?client={{clientname}}&answers={{Ansid}}&rot=false&clinical={{clinical}}&format=json&token={{previd}}&sessionid={{SessionID}}&signature={{signature}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"answers"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "answers",
									"value": "{{Ansid}}"
								},
								{
									"key": "rot",
									"value": "false"
								},
								{
									"key": "clinical",
									"value": "{{clinical}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{previd}}"
								},
								{
									"key": "sessionid",
									"value": "{{SessionID}}"
								},
								{
									"key": "signature",
									"value": "{{signature}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "GetQ&A",
			"item": [
				{
					"name": "getsignQ&A",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")\r",
									"\r",
									"// creating encoded url\r",
									"var id = pm.environment.get(\"SessionID\");\r",
									"var uuid = require('uuid');\r",
									"var myUUID = uuid.v4();\r",
									"postman.setEnvironmentVariable(\"previd\", myUUID);\r",
									"var clientname = pm.environment.get(\"clientname\")\r",
									"var res = \"seq-assess/v2/sessionresponse?client=\"+clientname+\"&clinical=\"+pm.environment.get(\"clinical\")+\"&format=json&token=\"+myUUID+\"&sessionid=\"+id;\r",
									"var encoded = encodeURIComponent(res);\r",
									"postman.setEnvironmentVariable(\"encoded\", encoded);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Placing signature in environment variable\r",
									"var str = responseBody.replace(\"\\\"\",\"\");\r",
									"var str1 = str.replace(\"\\\"\",\"\");\r",
									"pm.environment.set(\"signature\", str1);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/sign?client={{clientname}}&url=/{{encoded}}&format=json&token={{$guid}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"sign"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "url",
									"value": "/{{encoded}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{$guid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getQ&A",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"====***====Validation for all questions found and answered for the scenario====***====\",function() {\r",
									"   pm.expect(0).to.eql(Number(pm.environment.get(\"numofquestoanswer\")));\r",
									"});\r",
									"\r",
									"var numOfAns = Number(pm.environment.get(\"totalnumberofques\"));\r",
									"pm.test(\"Validation of the number of responses in Summary :: \"+numOfAns,function() {\r",
									"   var response = JSON.parse(responseBody); \r",
									"   console.log(\"Debug:Number of respose found in Q&A returned is ::\"+Object.keys(response.Responses).length);\r",
									"   pm.expect(Object.keys(response.Responses).length).to.eql(numOfAns);\r",
									"});\r",
									"\r",
									"let responseData=pm.response.json();\r",
									"jsonData = JSON.parse(responseBody)\r",
									"\r",
									"ar = JSON.parse(pm.environment.get(\"qnalist\"));\r",
									"\r",
									"// console.log(\"Debug:QNALIST array length :: \"+ar.length)\r",
									"for(var j=0; j<ar.length; j++) {\r",
									"    if(ar[j] === \"\") {\r",
									"        break;\r",
									"    }\r",
									"    else {\r",
									"        var ques_found = 0;\r",
									"        var curr_ques = ar[j].toString().replace(/\\\",\\\"/g, \",\").toUpperCase().trim();\r",
									"        // console.log(\"Debug:Exp Question Text :: \"+curr_ques)\r",
									"        for(var i=0; i<jsonData.Responses.length; i++) {\r",
									"            var ques_txt = jsonData.Responses[i].QuestionText.toUpperCase().trim();\r",
									"            if(ques_txt === curr_ques) {\r",
									"                ques_found = 1;\r",
									"                // console.log(\"Debug :\"+curr_ques+\" :: QUESTION is found\");\r",
									"                var exp_ans = ar[j+1].toString().toUpperCase().trim();\r",
									"                var act_ans = jsonData.Responses[i].Answer.toUpperCase().trim();\r",
									"                \r",
									"                if(act_ans === exp_ans) {\r",
									"                    console.log(\"Passed ::\"+act_ans+\" :: is selected for question :: \"+curr_ques);\r",
									"                    pm.test(\"Validation: \"+act_ans+\" :: is selected for question :: \"+ques_txt, function () {\r",
									"                        pm.expect(true).is.to.equal(true);\r",
									"                    });\r",
									"                }\r",
									"                else {\r",
									"                    console.log(\"Failed ::\"+act_ans+\" :: is selected for question :: \"+curr_ques);\r",
									"                    pm.test(\"Validation: \"+act_ans+\" :: is selected for question :: \"+ques_txt, function () {\r",
									"                        pm.expect(false).is.to.equal(true);\r",
									"                    });                    \r",
									"                }\r",
									"            }\r",
									"        }\r",
									"        if(ques_found === 0 && i === jsonData.Responses.length){\r",
									"            console.log(\"Failed :Expected Question ::\"+curr_ques+\" :: is missing\");\r",
									"            pm.test(\"Validation :Expected Question ::\"+curr_ques+\" :: is missing\", function () {\r",
									"                pm.expect(false).is.to.equal(true); \r",
									"            });            \r",
									"        }\r",
									"    }\r",
									"    j++;\r",
									"}\r",
									"\r",
									"let mockResponse = JSON.stringify(jsonData);\r",
									"pm.test(\"Response JSON body returned: \"+mockResponse, function () {\r",
									"    pm.expect(true).is.to.equal(true);\r",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/sessionresponse?client={{clientname}}&clinical={{clinical}}&format=json&token={{previd}}&sessionid={{SessionID}}&signature={{signature}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"sessionresponse"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "clinical",
									"value": "{{clinical}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{previd}}"
								},
								{
									"key": "sessionid",
									"value": "{{SessionID}}"
								},
								{
									"key": "signature",
									"value": "{{signature}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "GetWorseningstatements",
			"item": [
				{
					"name": "getsignworseningstatements",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")\r",
									"\r",
									"// creating encoded url\r",
									"var id = pm.environment.get(\"SessionID\");\r",
									"var uuid = require('uuid');\r",
									"var myUUID = uuid.v4();\r",
									"console.log(myUUID);\r",
									"postman.setEnvironmentVariable(\"previd\", myUUID);\r",
									"var clientname = pm.environment.get(\"clientname\")\r",
									"var res = \"seq-assess/v2/worseningstatements?client=\"+clientname+\"&clinical=\"+pm.environment.get(\"clinical\")+\"&format=json&token=\"+myUUID+\"&sessionid=\"+id;\r",
									"var encoded = encodeURIComponent(res);\r",
									"postman.setEnvironmentVariable(\"encoded\", encoded);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Placing signature in environment variable\r",
									"var str = responseBody.replace(\"\\\"\",\"\");\r",
									"var str1 = str.replace(\"\\\"\",\"\");\r",
									"pm.environment.set(\"signature\", str1);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/sign?client={{clientname}}&url=/{{encoded}}&format=json&token={{$guid}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"sign"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "url",
									"value": "/{{encoded}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{$guid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getworseningstatements",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									" var  schema =  {\r",
									"    \"type\": \"object\",\r",
									"    \"properties\": {\r",
									"      \"worseningstatement\": {\r",
									"        \"type\": \"array\",\r",
									"       \"items\": {\r",
									"         \"type\": \"object\",\r",
									"         \"required\": [\r",
									"             \"ProtCode\",\r",
									"             \"Protocol\",\r",
									"             \"Text\"\r",
									"         ],\r",
									"         \"properties\": {\r",
									"           \"ProtCode\": {\r",
									"             \"type\": \"string\"\r",
									"           },\r",
									"           \"Protocol\": {\r",
									"             \"type\": \"string\"\r",
									"           },\r",
									"             \"Text\": {\r",
									"             \"type\": \"string\"\r",
									"           },\r",
									"          \r",
									"               \r",
									"             }\r",
									"           }\r",
									"         }\r",
									"       }\r",
									"     }\r",
									"   \r",
									"\r",
									"\r",
									"pm.test('Schema is valid', function() {\r",
									"    var data=pm.response.json();\r",
									"  pm.expect(tv4.validate(data, schema)).to.be.true;\r",
									" \r",
									"});\r",
									"\r",
									"jsonData = JSON.parse(responseBody);\r",
									"let mockResponse = JSON.stringify(jsonData);\r",
									"pm.test(\"Response JSON body returned: \"+mockResponse, function () {\r",
									"    pm.expect(true).is.to.equal(true);\r",
									"});\r",
									"\r",
									"// pm.test(\"Text message validation\", function () {\r",
									"//     var jsonData = pm.response.json();    \r",
									"//     pm.expect(jsonData.worseningstatements.Text).to.eql(\"CONTACT GP SERVICE IF:.\\r\\nStill concerned about symptoms after 3 days.\");\r",
									"// });\r",
									"\r",
									"//ar jsonData = pm.response.json(); \r",
									"// jsonData = JSON.parse(responseBody)\r",
									"//  for (var i = 0; i < jsonData.WorseningStatements.length; i++){\r",
									"   \r",
									"// pm.test(\"Verify ProtCode\", function () { \r",
									"//         pm.expect(jsonData.WorseningStatements[i].ProtCode).is.to.equal(\"HEDL\"); \r",
									"//     });\r",
									"// pm.test(\"Verify Protocol\", function () { \r",
									"//         pm.expect(jsonData.WorseningStatements[i].Protocol).is.to.equal(\"Head Lice\"); \r",
									"//     });\r",
									"// pm.test(\"Verify Text\", function () { \r",
									"//         pm.expect(jsonData.WorseningStatements[i].Text).is.to.equal(\"CONTACT GP SERVICE OR PHARMACIST IF:.\\u000d\\u000aAfter using self-care treatment from the Pharmacist you are still concerned about symptoms.\"); \r",
									"//     });\r",
									"//  }"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/worseningstatements?client={{clientname}}&clinical={{clinical}}&format=json&token={{previd}}&sessionid={{SessionID}}&signature={{signature}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"worseningstatements"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "clinical",
									"value": "{{clinical}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{previd}}"
								},
								{
									"key": "sessionid",
									"value": "{{SessionID}}"
								},
								{
									"key": "signature",
									"value": "{{signature}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "GetSignpost",
			"item": [
				{
					"name": "getsignsignpost",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")\r",
									"\r",
									"// creating encoded url\r",
									"var id = pm.environment.get(\"SessionID\");\r",
									"var uuid = require('uuid');\r",
									"var myUUID = uuid.v4();\r",
									"console.log(myUUID);\r",
									"postman.setEnvironmentVariable(\"previd\", myUUID);\r",
									"var clientname = pm.environment.get(\"clientname\")\r",
									"var res = \"seq-assess/v2/signposts?client=\"+clientname+\"&clinical=\"+pm.environment.get(\"clinical\")+\"&format=json&token=\"+myUUID+\"&sessionid=\"+id;\r",
									"var encoded = encodeURIComponent(res);\r",
									"postman.setEnvironmentVariable(\"encoded\", encoded);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Placing signature in environment variable\r",
									"var str = responseBody.replace(\"\\\"\",\"\");\r",
									"var str1 = str.replace(\"\\\"\",\"\");\r",
									"pm.environment.set(\"signature\", str1);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/sign?client={{clientname}}&url=/{{encoded}}&format=json&token={{$guid}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"sign"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "url",
									"value": "/{{encoded}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{$guid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getsignposts",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")\r",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"jsonData = JSON.parse(responseBody);\r",
									"let mockResponse = JSON.stringify(jsonData);\r",
									"pm.test(\"Response JSON body returned: \"+mockResponse, function () {\r",
									"    pm.expect(true).is.to.equal(true);\r",
									"});\r",
									"// pm.environment.set('suggestedsignpost', mockResponse);\r",
									"\r",
									"// var sign=data.signpost.toString();\r",
									"// var signpostValue=sign.split(\"|\");\r",
									"// var pref=data.preferenceLevel.toString();\r",
									"// var preference=pref.split(\"|\");\r",
									"//Boolean(preference[0]);\r",
									"//console.log(Boolean(preference[0]));\r",
									"\r",
									"\r",
									"// var signpostid=data.signpostId.toString();\r",
									"// var id=signpostid.split(\"|\");\r",
									"\r",
									"\r",
									"// if(jsonData.IsSignPosted === true)\r",
									"// {\r",
									"//   for(var i=0;i<signpostValue.length;i++)\r",
									"//   {\r",
									"//    for(var j=0;j<jsonData.Signposts.length;j++)\r",
									"//    {\r",
									"//      if(signpostValue[i] === jsonData.Signposts[j].Text)\r",
									"//      {\r",
									"//        //console.log(i);\r",
									"//       pm.test(\"Validating the signpost text\", function () {\r",
									"//       console.log(signpostValue[i]);\r",
									"//       pm.expect(signpostValue[i]).is.to.equal(jsonData.Signposts[j].Text);\r",
									"//       });\r",
									"//       pm.test(\"Validating the PreferenceLevel of signpost\",function(){\r",
									"//         console.log(JSON.parse(preference[i]));\r",
									"//         //JSON.parse(preference[i]);\r",
									"//        console.log(jsonData.Signposts[j].PreferenceLevel);\r",
									"//         pm.expect(JSON.parse(preference[i])).is.to.equal(jsonData.Signposts[j].PreferenceLevel);\r",
									"//       })\r",
									"//       pm.test(\"Validating the SignpostId of signpost\",function(){\r",
									"//         console.log(jsonData.Signposts[j].SignpostId);\r",
									"//         pm.expect(Number(id[i])).is.to.equal(jsonData.Signposts[j].SignpostId);\r",
									"//       })\r",
									"//      }\r",
									"//    }\r",
									"//   }\r",
									"// }\r",
									"var schema = {\r",
									"  \"type\": \"object\",\r",
									"  \"properties\": {\r",
									"    \"IsSignPosted\":{\r",
									"      \"type\":\"boolean\"},\r",
									"    \"Signposts\": {\r",
									"      \"type\": \"array\",\r",
									"      \"items\": {\r",
									"        \"type\": \"object\",\r",
									"        \"required\": [\r",
									"          \"PreferenceLevel\",\r",
									"          \"SignpostId\",\r",
									"          \"SnomedCode\",\r",
									"          \"Text\"\r",
									"           ],\r",
									"        \"properties\": {\r",
									"          \"PreferenceLevel\": {\r",
									"            \"type\": \"boolean\"\r",
									"          }, \r",
									"          \"SignpostId\": {\r",
									"            \"type\": \"number\"\r",
									"          }, \r",
									"          \"SnomedCode\": {\r",
									"            \"type\": \"string\"\r",
									"          },  \r",
									"          \"Text\": {\r",
									"            \"type\": \"string\"\r",
									"          }\r",
									"        }\r",
									"      }\r",
									"    }\r",
									"  }\r",
									"}\r",
									"\r",
									"pm.test('Schema is valid', function () {\r",
									"  var data = pm.response.json();\r",
									"  pm.expect(tv4.validate(data, schema)).to.be.true;\r",
									"\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/signposts?client={{clientname}}&clinical={{clinical}}&format=json&token={{previd}}&sessionid={{SessionID}}&signature={{signature}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"signposts"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "clinical",
									"value": "{{clinical}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{previd}}"
								},
								{
									"key": "sessionid",
									"value": "{{SessionID}}"
								},
								{
									"key": "signature",
									"value": "{{signature}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"description": "It will have the set of APIs to fetch list of Signposts returned for the assessment."
		},
		{
			"name": "GetCareadvice",
			"item": [
				{
					"name": "getsigncareadvice",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")\r",
									"\r",
									"// creating encoded url\r",
									"var id = pm.environment.get(\"SessionID\");\r",
									"var uuid = require('uuid');\r",
									"var myUUID = uuid.v4();\r",
									"postman.setEnvironmentVariable(\"previd\", myUUID);\r",
									"var clientname = pm.environment.get(\"clientname\")\r",
									"var res = \"seq-assess/v2/careadvice?client=\"+clientname+\"&clinical=\"+pm.environment.get(\"clinical\")+\"&format=json&token=\"+myUUID+\"&sessionid=\"+id;\r",
									"var encoded = encodeURIComponent(res);\r",
									"postman.setEnvironmentVariable(\"encoded\", encoded);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Placing signature in environment variable\r",
									"var str = responseBody.replace(\"\\\"\",\"\");\r",
									"var str1 = str.replace(\"\\\"\",\"\");\r",
									"pm.environment.set(\"signature\", str1);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/sign?client={{clientname}}&url=/{{encoded}}&format=json&token={{$guid}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"sign"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "url",
									"value": "/{{encoded}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{$guid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getcareadvice",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"jsonData = JSON.parse(responseBody);\r",
									"let mockResponse = JSON.stringify(jsonData);\r",
									"pm.test(\"Response JSON body returned: \"+mockResponse, function () {\r",
									"    pm.expect(true).is.to.equal(true);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/careadvice?client={{clientname}}&clinical={{clinical}}&format=json&token={{previd}}&sessionid={{SessionID}}&signature={{signature}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"careadvice"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "clinical",
									"value": "{{clinical}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{previd}}"
								},
								{
									"key": "sessionid",
									"value": "{{SessionID}}"
								},
								{
									"key": "signature",
									"value": "{{signature}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "GetDemographicDetails",
			"item": [
				{
					"name": "getsignsessiondemographics",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")\r",
									"\r",
									"// creating encoded url\r",
									"var id = pm.environment.get(\"SessionID\");\r",
									"var uuid = require('uuid');\r",
									"var myUUID = uuid.v4();\r",
									"postman.setEnvironmentVariable(\"previd\", myUUID);\r",
									"var clientname = pm.environment.get(\"clientname\")\r",
									"var res = \"seq-assess/v2/sessiondemographics?client=\"+clientname+\"&clinical=\"+pm.environment.get(\"clinical\")+\"&format=json&token=\"+myUUID+\"&sessionid=\"+id;\r",
									"var encoded = encodeURIComponent(res);\r",
									"postman.setEnvironmentVariable(\"encoded\", encoded);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Placing signature in environment variable\r",
									"var str = responseBody.replace(\"\\\"\",\"\");\r",
									"var str1 = str.replace(\"\\\"\",\"\");\r",
									"pm.environment.set(\"signature\", str1);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/sign?client={{clientname}}&url=/{{encoded}}&format=json&token={{$guid}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"sign"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "url",
									"value": "/{{encoded}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{$guid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getsessiondemographics",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"jsonData = JSON.parse(responseBody)\r",
									"\r",
									"var demographic = pm.environment.get(\"demographics\");\r",
									"var expAgeInWeek = Number(demographic.slice(1));\r",
									"var expGender = demographic.substr(0,1);\r",
									"var complaint = pm.environment.get(\"searchcomplaint\");\r",
									"\r",
									"pm.test(\"====***====Validation of selected Complaint :: \"+complaint+\" ====***====\", function () { \r",
									"    pm.expect(true).is.to.equal(true); \r",
									"});\r",
									"pm.test(\"====***====Validation of selected Age in weeks :: \"+expAgeInWeek+\" ====***====\", function () { \r",
									"    pm.expect(Number(jsonData.Age)).is.to.equal(expAgeInWeek); \r",
									"});\r",
									"pm.test(\"====***====Validation of selected Gender :: \"+expGender+\" ====***====\", function () { \r",
									"    pm.expect(jsonData.Gender).is.to.equal(expGender); \r",
									"});\r",
									" \r",
									"let mockResponse = JSON.stringify(jsonData);\r",
									"pm.test(\"Response JSON body returned: \"+mockResponse, function () {\r",
									"    pm.expect(true).is.to.equal(true);\r",
									"});\r",
									"\r",
									"// var  schema =  {\r",
									"//             \"Age\": \"string\",\r",
									"//             \"Complaint\": \"number\",\r",
									"//             \"Gender\":\"string\"\r",
									"           \r",
									"// }\r",
									"\r",
									"// pm.test('Schema is valid', function() {\r",
									"//     var data=pm.response.json();\r",
									"//   pm.expect(tv4.validate(data, schema)).to.be.true;\r",
									" \r",
									"// });"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/sessiondemographics?client={{clientname}}&clinical={{clinical}}&format=json&token={{previd}}&sessionid={{SessionID}}&signature={{signature}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"sessiondemographics"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "clinical",
									"value": "{{clinical}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{previd}}"
								},
								{
									"key": "sessionid",
									"value": "{{SessionID}}"
								},
								{
									"key": "signature",
									"value": "{{signature}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "GetUrgency",
			"item": [
				{
					"name": "geturgencytextsignature",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")\r",
									"\r",
									"// creating encoded url\r",
									"var urgency = pm.environment.get(\"urgencycode\");\r",
									"var uuid = require('uuid');\r",
									"var myUUID = uuid.v4();\r",
									"postman.setEnvironmentVariable(\"previd\", myUUID);\r",
									"var clientname = pm.environment.get(\"clientname\")\r",
									"var res = \"seq-assess/v2/urgency?client=\"+clientname+\"&clinical=\"+pm.environment.get(\"clinical\")+\"&format=json&token=\"+myUUID+\"&urgencycode=\"+urgency;\r",
									"var encoded = encodeURIComponent(res);\r",
									"\r",
									"postman.setEnvironmentVariable(\"encoded\", encoded)"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Placing signature in environment variable\r",
									"var str = responseBody.replace(\"\\\"\",\"\");\r",
									"var str1 = str.replace(\"\\\"\",\"\");\r",
									"pm.environment.set(\"signature\", str1);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/sign?client={{clientname}}&url=/{{encoded}}&format=json&token={{$guid}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"sign"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "url",
									"value": "/{{encoded}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{$guid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "geturgencytext",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(request.name+\" is running\")"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// tests[\"Request menthod validation\"] = request.method === \"GET\"\r",
									"var UrgencyCode = pm.environment.get(\"urgencycode\").trim();\r",
									"var jsonData = JSON.parse(responseBody)\r",
									"var messg = jsonData.UrgencyText;\r",
									"var ActUrgCode = jsonData.UrgencyCode.trim();\r",
									"console.log(\"********** \"+messg+\":::: is returned as Urgency Message ************\")\r",
									"\r",
									"pm.test(\"Validation of urgencycode returned :: Exp_Urg_Code:\"+UrgencyCode+\" and Act_Urg_Code:\"+ActUrgCode, function () {\r",
									"        pm.expect(ActUrgCode).is.to.equal(UrgencyCode);\r",
									"});\r",
									"\r",
									"if (UrgencyCode === \"EMER\") {\r",
									"      pm.test(\"Validation of urgencyText for \"+UrgencyCode+\" is \"+messg, function () {\r",
									"        pm.expect(jsonData.UrgencyText).is.to.equal(\"Please close this assessment and approach the Reception Desk immediately with your reference number below\");\r",
									"    });\r",
									"}\r",
									"else if (UrgencyCode === \"IMM1\") {\r",
									"      pm.test(\"Validation of urgencyText for \"+UrgencyCode+\" is \"+messg, function () {\r",
									"      pm.expect(jsonData.UrgencyText).is.to.equal(\"Please approach the Reception Desk immediately with the below reference number\");\r",
									"    });\r",
									"  }\r",
									"else if (UrgencyCode === \"IMM2\") {\r",
									"      pm.test(\"Validation of urgencyText for \"+UrgencyCode+\" is \"+messg, function () {\r",
									"        pm.expect(jsonData.UrgencyText).is.to.equal(\"Please approach the Reception Desk immediately with the below reference number\");\r",
									"      });\r",
									"  }\r",
									"  else if (UrgencyCode === \"URG1\") {\r",
									"      pm.test(\"Validation of urgencyText for \"+UrgencyCode+\" is \"+messg, function () {\r",
									"        pm.expect(jsonData.UrgencyText).is.to.equal(\"Please approach the Reception Desk with the below reference number\");\r",
									"      });\r",
									"  }\r",
									"  else if (UrgencyCode === \"URG2\") {\r",
									"      pm.test(\"Validation of urgencyText for \"+UrgencyCode+\" is \"+messg, function () {\r",
									"      pm.expect(jsonData.UrgencyText).is.to.equal(messg);\r",
									"    });\r",
									"  }\r",
									"  else if (UrgencyCode === \"MODE\") {\r",
									"      pm.test(\"Validation of urgencyText for \"+UrgencyCode+\" is \"+messg, function () {\r",
									"      pm.expect(jsonData.UrgencyText).is.to.equal(\"Further assessment needed - please remember your reference number and choose an option below\");\r",
									"    });\r",
									"  }\r",
									"  else if (UrgencyCode === \"ROUT\") {\r",
									"      pm.test(\"Validation of urgencyText for \"+UrgencyCode+\" is \"+messg, function () {\r",
									"      pm.expect(jsonData.UrgencyText).is.to.equal(\"face to face assessment within routine timeframe\");\r",
									"    });\r",
									"  }\r",
									"  else{\r",
									"    pm.test(\"Validation of urgencyText for \"+UrgencyCode+\" is \"+messg, function () {\r",
									"      pm.expect(jsonData.UrgencyText).is.to.equal(\"No clinical assessment needed - please select the Self Care option below and click Close Assessment for a copy of your advice\");\r",
									"    });\r",
									"  }\r",
									"\r",
									"let mockResponse = JSON.stringify(jsonData);\r",
									"pm.test(\"Response JSON body returned: \"+mockResponse, function () {\r",
									"    pm.expect(true).is.to.equal(true);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base}}seq-assess/v2/urgency?client={{clientname}}&clinical={{clinical}}&format=json&token={{previd}}&urgencycode={{urgencycode}}&signature={{signature}}",
							"host": [
								"{{base}}seq-assess"
							],
							"path": [
								"v2",
								"urgency"
							],
							"query": [
								{
									"key": "client",
									"value": "{{clientname}}"
								},
								{
									"key": "clinical",
									"value": "{{clinical}}"
								},
								{
									"key": "format",
									"value": "json"
								},
								{
									"key": "token",
									"value": "{{previd}}"
								},
								{
									"key": "urgencycode",
									"value": "{{urgencycode}}"
								},
								{
									"key": "signature",
									"value": "{{signature}}"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	]
}